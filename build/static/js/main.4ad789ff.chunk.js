(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(10),s=n.n(r),i=n(15),u=n(11),o=n(12),c=n(14),m=n(13),d=n(16),f=function(e){var t=e.persons,n=e.filter,a=e.deleteName;return(0===n.length?t:t.filter(function(e){return e.name.startsWith(n)})).map(function(e){return l.a.createElement("li",{key:e.name},e.name," ",e.number," ",l.a.createElement("button",{onClick:function(){return a(e.id)}},"Poista"))})},h=function(e){var t=e.newName,n=e.newNumber,a=e.addName,r=e.handleNameChange,s=e.handleNumberChange;return l.a.createElement("form",{onSubmit:a},l.a.createElement("div",null,"nimi: ",l.a.createElement("input",{value:t,onChange:r})),l.a.createElement("div",null,"numero: ",l.a.createElement("input",{value:n,onChange:s})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},g=function(e){var t=e.message;return null===t?null:l.a.createElement("div",{className:"daijoubu"},t)},p=n(2),N=n.n(p),v="http://localhost:3001/api/persons",b={getAll:function(){return N.a.get(v)},create:function(e){return N.a.post(v,e)},update:function(e,t){return N.a.put("".concat(v,"/").concat(e),t)},destroy:function(e){return N.a.delete("".concat(v,"/").concat(e))}},w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleNameChange=function(e){console.log(e.target.value),n.setState({newName:e.target.value})},n.handleNumberChange=function(e){console.log(e.target.value),n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){console.log(e.target.value),n.setState({filter:e.target.value})},n.addName=function(e){e.preventDefault();var t,a=n.state.newName;if(n.state.persons.find(function(e){return e.name===a&&(t=e.id,!0)})){if(window.confirm("".concat(a," on jo luettelossa, korvataanko vanha numero uudella?"))){var l=n.state.persons.find(function(e){return e.id===t}),r=Object(i.a)({},l,{number:n.state.newNumber});b.update(t,r).then(function(e){n.setState({persons:n.state.persons.map(function(n){return n.id!==t?n:e.data}),newName:"",newNumber:"",message:"P\xe4ivitettiin ".concat(a)})}).catch(function(e){n.setState({persons:n.state.persons.filter(function(e){return e.id!==t}),message:"Henkil\xf6 '".concat(a,'\' on jo valitettavasti poistettu palvelimelta. Paina "lis\xe4\xe4" uudestaan jos haluat lis\xe4t\xe4 henkil\xf6n palvelimelle.')})}),setTimeout(function(){n.setState({message:null})},3e3)}}else{var s={name:n.state.newName,number:n.state.newNumber};b.create(s).then(function(e){n.setState({persons:n.state.persons.concat(e.data),newName:"",newNumber:"",message:"Lis\xe4ttiin ".concat(a)}),setTimeout(function(){n.setState({message:null})},3e3)})}},n.deleteName=function(e){console.log("Try Deleting...");var t=n.state.persons.find(function(t){return t.id===e});window.confirm("Poistetaanko henkil\xf6 ".concat(t.name,"?"))&&(console.log("Deleting..."),b.destroy(e).then(function(a){n.setState({persons:n.state.persons.filter(function(t){return t.id!==e}),newName:"",newNumber:"",message:"Poistettiin ".concat(t.name)}),setTimeout(function(){n.setState({message:null})},3e3)}))},n.state={persons:[],newName:"",newNumber:"",filter:"",message:null},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t.data})})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"Puhelinluettelo"),l.a.createElement("div",null,l.a.createElement(g,{message:this.state.message}),"rajaa n\xe4ytett\xe4vi\xe4 ",l.a.createElement("input",{value:this.state.filter,onChange:this.handleFilterChange})),l.a.createElement("h3",null,"Lis\xe4\xe4 uusi:"),l.a.createElement(h,{newName:this.state.newName,newNumber:this.state.newNumber,addName:this.addName,handleNameChange:this.handleNameChange,handleNumberChange:this.handleNumberChange}),l.a.createElement("h2",null,"Numerot"),l.a.createElement("ul",null,l.a.createElement(f,{persons:this.state.persons,filter:this.state.filter,deleteName:this.deleteName})))}}]),t}(l.a.Component);n(41);s.a.render(l.a.createElement(w,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.4ad789ff.chunk.js.map